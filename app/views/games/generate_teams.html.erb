<!DOCTYPE html>
<html>
<head>
  <title>Generuj Drużyny - Superliga 2026</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .toggle-checkbox:checked {
      right: 0;
      border-color: #0a0a0a;
    }
    .toggle-checkbox:checked + .toggle-label {
      background-color: #0a0a0a;
    }
  </style>
  <script>
    function togglePlayer(playerId) {
      const toggle = document.getElementById(`toggle-${playerId}`);
      const row = toggle.closest('tr');
      
      if (toggle.checked) {
        row.classList.remove('opacity-50');
      } else {
        row.classList.add('opacity-50');
      }
    }
    
    function toggleGoalkeeper(playerId) {
      const button = document.getElementById(`gk-${playerId}`);
      const isGoalkeeper = button.dataset.goalkeeper === 'true';
      
      if (isGoalkeeper) {
        button.dataset.goalkeeper = 'false';
        button.classList.remove('bg-neutral-900', 'text-white');
        button.classList.add('bg-white', 'text-neutral-600', 'border-neutral-200');
        button.innerHTML = `
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
          </svg>
        `;
      } else {
        button.dataset.goalkeeper = 'true';
        button.classList.remove('bg-white', 'text-neutral-600', 'border-neutral-200');
        button.classList.add('bg-neutral-900', 'text-white');
        button.innerHTML = `
          <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"></path>
          </svg>
        `;
      }
    }
  </script>
</head>
<body class="bg-neutral-50 min-h-screen p-4 md:p-5">
  <div class="max-w-4xl mx-auto">
    <header class="bg-white border border-neutral-200 rounded-lg p-6 md:p-8 mb-6 shadow-sm">
      <h1 class="text-2xl md:text-3xl font-bold text-neutral-900 mb-2 tracking-tight">Generuj Drużyny</h1>
      <div class="text-neutral-600 text-sm md:text-base mb-4">
        <%= @game.date.strftime('%A, %d %B %Y, %H:%M') %>
      </div>
      <%= link_to '← Powrót do Meczu', game_path(@game), class: 'inline-block px-4 py-2 bg-white text-neutral-900 border border-neutral-200 rounded-md font-medium text-sm hover:bg-neutral-50 transition' %>
    </header>

    <div class="bg-white border border-neutral-200 rounded-lg p-4 md:p-6 shadow-sm mb-6">
      <div class="flex items-center justify-between mb-4 pb-3 border-b border-neutral-200">
        <h2 class="text-xl font-semibold text-neutral-900 tracking-tight">Wybierz Zawodników</h2>
        <div class="flex items-center gap-4 text-sm text-neutral-600">
          <div class="flex items-center gap-2">
            <div class="w-3 h-3 bg-neutral-900 rounded-full"></div>
            <span class="hidden sm:inline">Bramkarz</span>
            <span class="sm:hidden">GK</span>
          </div>
        </div>
      </div>

      <div class="overflow-x-auto -mx-4 md:mx-0">
        <table class="w-full border-collapse">
          <thead>
            <tr class="bg-neutral-50">
              <th class="px-3 md:px-4 py-3 text-left text-xs font-semibold text-neutral-600 uppercase tracking-wider border-b border-neutral-200">Zawodnik</th>
              <th class="px-3 md:px-4 py-3 text-center text-xs font-semibold text-neutral-600 uppercase tracking-wider border-b border-neutral-200">Dostępny</th>
              <th class="px-3 md:px-4 py-3 text-center text-xs font-semibold text-neutral-600 uppercase tracking-wider border-b border-neutral-200">Bramkarz</th>
            </tr>
          </thead>
          <tbody>
            <% @players.each do |player| %>
              <tr class="hover:bg-neutral-50 transition">
                <td class="px-3 md:px-4 py-3 md:py-4 border-b border-neutral-100">
                  <span class="font-medium text-neutral-900 text-sm md:text-base"><%= player.name %></span>
                </td>
                <td class="px-3 md:px-4 py-3 md:py-4 border-b border-neutral-100 text-center">
                  <div class="flex items-center justify-center">
                    <div class="relative inline-block w-12 h-6 transition duration-200 ease-linear">
                      <input
                        type="checkbox"
                        id="toggle-<%= player.id %>"
                        checked
                        onchange="togglePlayer(<%= player.id %>)"
                        class="toggle-checkbox absolute block w-5 h-5 rounded-full bg-white border-2 appearance-none cursor-pointer transition-all duration-200 ease-linear top-0.5 left-0.5"
                      />
                      <label
                        for="toggle-<%= player.id %>"
                        class="toggle-label block overflow-hidden h-6 rounded-full bg-neutral-300 cursor-pointer transition-colors duration-200 ease-linear"
                      ></label>
                    </div>
                  </div>
                </td>
                <td class="px-3 md:px-4 py-3 md:py-4 border-b border-neutral-100 text-center">
                  <button
                    type="button"
                    id="gk-<%= player.id %>"
                    data-goalkeeper="false"
                    onclick="toggleGoalkeeper(<%= player.id %>)"
                    class="inline-flex items-center justify-center w-9 h-9 bg-white text-neutral-600 border border-neutral-200 rounded-md hover:bg-neutral-50 transition"
                  >
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                    </svg>
                  </button>
                </td>
              </tr>
            <% end %>
          </tbody>
        </table>
      </div>
    </div>

    <div class="bg-white border border-neutral-200 rounded-lg p-4 md:p-6 shadow-sm">
      <div class="flex flex-col sm:flex-row gap-3 justify-end">
        <%= link_to 'Anuluj', game_path(@game), class: 'inline-flex items-center justify-center px-5 py-2.5 bg-white text-neutral-900 border border-neutral-200 rounded-md font-medium text-sm hover:bg-neutral-50 transition' %>
        <button
          type="button"
          class="inline-flex items-center justify-center px-5 py-2.5 bg-neutral-900 text-white rounded-md font-medium text-sm hover:bg-neutral-800 transition"
        >
          Generuj Drużyny
        </button>
      </div>
    </div>
  </div>
</body>
</html>
